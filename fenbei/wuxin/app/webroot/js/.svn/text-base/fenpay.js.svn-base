!function($) {    //插件  $.fn.extend({    /**     * 为空不提交表单，目标设置为焦点     *     **/    is_empty: function() {      var $this = $(this).first();        if ($this.val()) {            return false;        } else {            $this.focus();            return true;        }    },    /* 字数审核 */    charCount: function(givenOptions) {      return this.each(function() {        var $this = $(this),        options = $.extend({            maxChars: 200,            maxCharsWarning: 190,            msgFontSize: '14px',            msgFontColor: '#3a87ad',            msgFontFamily: 'Arial',            msgTextAlign: 'top',            msgWarningColor: '#e44443',            msgAppendMethod: 'insertAfter',            msg: '',            msgPlacement: 'prepend',            numFormat: 'CURRENT/MAX'}, givenOptions);        if(options.maxChars <= 0) return;        var jqEasyCounterMsg = $("<div class=\"jqEasyCounterMsg\">&nbsp;</div>");        var jqEasyCounterMsgStyle = {          'font-size' : options.msgFontSize,          'font-family' : options.msgFontFamily,          'color' : options.msgFontColor,          'text-align' : options.msgTextAlign,          //'width' : '140px',          'opacity' : 0,          'display' : 'inline-block',          'background-color' : '#d9edf7',          'border-color' : '#bce8f1',          'margin-left' : '5px',          'padding' : '5px 10px'        };        jqEasyCounterMsg.css(jqEasyCounterMsgStyle);        jqEasyCounterMsg[options.msgAppendMethod]($this);        $this          .bind('keydown keyup keypress', doCount)          .bind('focus paste', function(){setTimeout(doCount, 10);})          .bind('blur', function(){jqEasyCounterMsg.stop().fadeTo( 'fast', 0);return false;});        function doCount(){          var val = $this.val(),              length = val.length;          if(length >= options.maxChars) {            val = val.substring(0, options.maxChars);          }          if(length > options.maxChars){            var originalScrollTopPosition = $this.scrollTop();            $this.val(val.substring(0, options.maxChars));            $this.scrollTop(originalScrollTopPosition);          }          if(length >= options.maxCharsWarning){            jqEasyCounterMsg.css({"color" : options.msgWarningColor});          }else {            jqEasyCounterMsg.css({"color" : options.msgFontColor});          }          if(options.msgPlacement == 'prepend'){            html = options.msg + options.numFormat;          } else {            html = options.numFormat + options.msg;          }          html = html.replace('CURRENT', $this.val().length);          html = html.replace('MAX', options.maxChars);          html = html.replace('REMAINING', options.maxChars - $this.val().length);          jqEasyCounterMsg.html(html);          jqEasyCounterMsg.stop().fadeTo( 'fast', 1);        }      });    },      /**     * 删除     *     * $.dedetetr(url,id);     **/    deleteTr : function(id) {      var $del = $(this);      var id = $del.data('id'),          url = $del.data('url')+id;      var dangerBtn = $('.modal a.btn-danger');        dangerBtn.click(function(){            $.ajax({                dataType: "json",                url: url,                type: 'GET',                success: function(resp) {                  if(resp.result == true) {                    $del.closest("tr").remove();                    $.messager(resp.message);                 }                  return false;                }            });        });      $('.modal a.btn-cancel').click(function(){        dangerBtn.unbind('click');      });    }  });  $.extend({    /**     * 返回顶部     *     * $.returntop();     **/    returntop: function() {        var $el = $("<div id=\"returntop\"></div>");        $("body").append($el);        var obj = $el.click(function(){            $("html, body").animate({                scrollTop: 0 },120);        });        $(window).on("scroll",function(){            var topHeight = $(document).scrollTop(),            winHeight = $(window).height();            if (200 < topHeight) {                obj.fadeIn();            } else {                obj.fadeOut();            }        });    },    /**     * 提示     *     * $.messager();     **/    messager : function(message,refer,callback) {      if(!message) {        return false;      }      $(".alert-info").remove();      var $el = $("<div id=\"messager\"></div>");      $(".alert-message").html($el).removeClass('hide');      $el.html("<button type='button' class='close' data-dismiss='alert'>×</button>"+ message);      $el.delay('3000')      .animate({          scrollTop: $('#messager').offset().top + 'px',          queue: true      }, 200,      function() {        $el.remove();        $(".alert-message").addClass('hide');        if (refer) {          if (refer == 'reload') {            window.location.reload();          } else {            window.location.href = refer;          }        }        if (callback) {          callback();        }      });    }  });  $(document).on('click', '[data-del="tr"]', function () {    var $this = $(this);       $this.deleteTr();  });}(window.jQuery)