<div class="pageHeader">
	<form method="post" action="{$current_url}" onSubmit="return divSearch(this, 'stat-chart');">
	<div class="searchBar">
		<table class="searchContent">
			<tr>
				<td>统计时间段：</td>
				<td width="120" colspan="2">
				<input type="text" class="date" name="begin" value="{$begin}" format="yyyy-MM-dd" yearstart="-10" yearend="0" size="20" readonly/>
				~
				<input type="text" class="date" name="end" value="{$end}" format="yyyy-MM-dd" yearstart="-10" yearend="0" size="20" readonly/>
				</td>
			</tr><tr>
				<td>分析项目：</td>
				<td><input type="checkbox" name="items[]" value="checkin"<!--{if isset($items)&&!empty($items)&&in_array('checkin',$items)}--> checked="checked"<!--{/if}-->/>签到数 
				<input type="checkbox" name="items[]" value="tip"<!--{if isset($items)&&!empty($items)&&in_array('tip',$items)}--> checked="checked"<!--{/if}-->/>点评数 
				<input type="checkbox" name="items[]" value="photo"<!--{if isset($items)&&!empty($items)&&in_array('photo',$items)}--> checked="checked"<!--{/if}-->/>图片数 
				<input type="checkbox" name="items[]" value="reply"<!--{if isset($items)&&!empty($items)&&in_array('reply',$items)}--> checked="checked"<!--{/if}-->/>回复数 
				<input type="checkbox" name="items[]" value="UPM"<!--{if isset($items)&&!empty($items)&&in_array('UPM',$items)}--> checked="checked"<!--{/if}-->/>私信数 
				<input type="checkbox" name="items[]" value="share"<!--{if isset($items)&&!empty($items)&&in_array('share',$items)}--> checked="checked"<!--{/if}-->/>分享次数
				<input type="checkbox" group="items[]" class="checkboxCtrl"<!--{if isset($items)&&!empty($items)&&count($items)==6}--> checked="checked"<!--{/if}-->/>全部</td>
				<td>
					<div class="buttonActive"><div class="buttonContent"><button type="submit">检索</button></div></div>
				</td>
			</tr>
		</table>
	</div>
	</form>
</div>
<div class="pageContent">
	<div id="stat_content_container" style="min-width: 400px; height: 400px; margin:auto;"></div>
</div>
<script type="text/javascript">
	$(function(){
		new Highcharts.Chart({
            chart: {
                renderTo: 'stat_content_container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: '内容分析 - 趋势图',
                x: -20 //center
            },
            subtitle: {
                text: '{$data[subtitle]}',
                x: -20
            },
            xAxis: {
            	type: "datetime",
                labels: {
                    formatter: function() {
                        return  Highcharts.dateFormat('%Y-%m-%d', this.value);
                    }
                }
            },
            yAxis: {
                title: {
                    text: '{$data[y_axis]}'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%Y-%m-%d',this.x) +': '+ this.y +'次';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: [
               	<!--{eval $split='';}-->
                <!--{loop $data[series] $key $item}-->
                {$split}{name:'{$key}',data:[{$item}]}
	            <!--{eval $split=',';}-->
                <!--{/loop}-->
            ]
        });
    });
</script>