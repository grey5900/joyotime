(function(n){var t=function(){return+new Date^Math.random()};n.fn.mapper=function(r){function o(n,t){for(i in n)n[i].setMap(t)}function e(n,t,i){var r;r=n.infowindow instanceof soso.maps.InfoWindow?n.infowindow:new soso.maps.InfoWindow({content:n.infoContent}),soso.maps.Event.addListener(t,"click",function(){r.open(i,t)})}var u={zoomLevel:8,mapTypeId:soso.maps.MapTypeId.ROADMAP,lat:"0",lng:"0",marker:!0,infowindow:!0},f=[t()];return this.each(function(){_default={},n(this).attr("data-lat")&&(_default.lat=n(this).attr("data-lat")),n(this).attr("data-lng")&&(_default.lng=n(this).attr("data-lng")),_default.address=n(this).text(),_default.infoContent=n(this).text(),n.extend(u,_default),r&&n.extend(u,r),typeof u.before=="function"&&u.before.call(this,u),latlng=new soso.maps.LatLng(parseFloat(u.lat),parseFloat(u.lng)),u.center=latlng,n(this).attr("id")?id=n(this).attr("id"):(rand=f.pop()+1,id="mapper_"+rand,f.push(rand)),n(this).attr("id",id);var i=new soso.maps.Map(document.getElementById(id),u),t=[];u.marker&&(u.marker==!0?(_marker=new soso.maps.Marker({position:latlng,title:u.address}),u.infowindow&&e(u,_marker,i),t.push(_marker)):n.isArray(u.marker)?t=u.marker:t.push(u.marker),o(t,i)),typeof u.after=="function"&&u.after.call(this,i)})}})(jQuery)