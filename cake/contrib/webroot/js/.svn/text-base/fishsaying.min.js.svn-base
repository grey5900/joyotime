!function(e){e.fn.extend({is_empty:function(){var i=e(this).first();return i.val()?!1:(i.focus(),!0)}}),e.extend({messager:function(i){if(!i)return!1;e(".alert-info").remove();var t=e('<div id="messager"></div>');e(".alert-message").html(t).removeClass("hide"),t.html(i),e.lightning()},popupSelect:function(){var i=e("#select_news"),t=e(".ui-selected",i),a=e("#graphic_text",t).text(),o=JSON.parse(e(".data",t).text()),n=e("#graphic_img",t).attr("src"),s=e("#show_graphic");t.length&&(e("#show_graphic_img").attr({src:n}),e("#show_graphic_text").text(a),e("input.input_auto_reply_message_id").val(o.id),s.removeClass("hide"),i.modal("hide"))},lightning:function(){var i=e(".alert");i&&i.delay("3000").animate({queue:!0},200,function(){e(".alert").addClass("hide")})},returntop:function(){e("html, body").animate({scrollTop:0},120),e(window).on("scroll",function(){var i=e(document).scrollTop();e(window).height(),i>200?obj.fadeIn():obj.fadeOut()})}})}(window.jQuery),$(function(){$.lightning();var e="",i="";$("a.remove-link").click(function(){i=$(this),e=i.attr("data-remove")}),$('[data-id="remove"]').click(function(){$.getJSON(e,function(e){$.messager(e.message),i.closest("tr").remove()})}),$("form#voicesAddForm").submit(function(){console.log("ok"),$.returntop();var e=$(this).find("#voicesTitle"),i=$(this).find("#voicesCover"),t=$(this).find("#voicesVoice"),a=($(this).find("#voicesLength"),$(this).find("#RecordCommentLongitude")),o=$(this).find("#RecordCommentLatitude"),n=$(this).find("#RecordCommentAddress"),s=$(this).find("#voiceDuration"),d=t.val(),r=$(this).find("button[type=submit]"),l=$(this).find("#w"),m=$(this).find("#h"),c=$(this).find("#l"),h=$(this).find("#t");return e.is_empty()||e.length>15?(e.focus(),$.messager("填写解说标题，不能超过15个字符"),!1):i.is_empty()||l.is_empty()||m.is_empty()||c.is_empty()||h.is_empty()||l.val()<640?($.messager("请上传图片,封面图选区尺寸须大于640*640"),!1):t.is_empty()?($.messager("请上传音频"),!1):/.(m4a)$/.test(d)?a.is_empty()||n.is_empty()||o.is_empty()?($.messager("请填写地址经纬度"),!1):s.is_empty()?($.messager("无法得到音频文件的时长,音频解析失败,请检查音频是否为AAC编码！"),!1):(r.button("loading"),$("#target").loadingOverlay(),void 0):($.messager("请上传m4a格式音频"),!1)}),$(".invalid-reason").tooltip("hide"),$('[data-play="modal"]').on("click",function(){var e=$(this),i=e.data("voice"),t=e.data("player-id");$("#modalPlay").modal("show"),$("#modalPlay .modal-body").prepend($('<div id="'+t+'" class="jp-jplayer"></div>')),$("#"+t).jPlayer({ready:function(){$(this).jPlayer("setMedia",{m4a:i})},swfPath:"/js",supplied:"m4a",wmode:"window",smoothPlayBar:!0,keyEnabled:!0})}),$('[data-id="colsePlay"]').on("click",function(){$("#modalPlay").modal("hide"),$(".jp-jplayer").jPlayer("clearMedia")}),$('[data-info="modal"]').on("click",function(){$("#modalInfo").modal("show")})});