function codeAddress(){var n=$(window.parent.document).find("#address").val();n!=null&&geocoder.geocode({address:n},function(n,t){t==soso.maps.GeocoderStatus.OK?flagToMap(n.location):flagToMap(center)})}function codeLocation(n){geocoder.geocode({location:n},function(n,t){t==soso.maps.GeocoderStatus.OK?$(window.parent.document).find("#address").val(n.address):$(window.parent.document).find("#address").val("没找到")})}function flagToMap(n){var t=n.getLat()+","+n.getLng();map.moveTo(n),marker==null?marker=new soso.maps.Marker({map:map,draggable:!0,position:n}):marker.setPosition(n),$(window.parent.document).find("#coordinate").val(t),$("#lat").val(n.getLat()),$("#lng").val(n.getLng()),codeLocation(n)}function flagToMapNoDrag(n){var t=n.getLat()+","+n.getLng();map.moveTo(n),marker==null?marker=new soso.maps.Marker({map:map,position:n}):marker.setPosition(n),$(window.parent.document).find("#coordinate").val(t),codeLocation(n)}function show_map(n,t,i){center=new soso.maps.LatLng(n,t),mapInit(i)}function mapInit(n){var f,u,r,e,i,t;map=new soso.maps.Map(document.getElementById("map"),{center:center,zoomLevel:15}),geocoder=new soso.maps.Geocoder,n?(flagToMap(center),f=document.getElementById("mapM"),soso.maps.Event.addDomListener(f,"click",function(){t.setVisible(!0),t.getMap()?t.setMap(null):t.setMap(map)}),u=document.getElementById("sAlign"),r=0,soso.maps.Event.addDomListener(u,"click",function(){t.setMap(map);switch(r){case 0:t.setAlign(soso.maps.ALIGN.TOP_RIGHT),r++;break;case 1:t.setAlign(soso.maps.ALIGN.TOP_LEFT),r=0}}),e=document.getElementById("sStyle"),i=0,soso.maps.Event.addDomListener(e,"click",function(){t.setMap(map);switch(i){case 0:t.setStyle(soso.maps.NavigationControlStyle.NORMAL),i++;break;case 1:t.setStyle(soso.maps.NavigationControlStyle.LARGE),i=0}})):flagToMapNoDrag(center),soso.maps.Event.addListener(marker,"dragend",function(){var n=marker.getPosition();flagToMap(n)}),soso.maps.Event.addListener(marker,"dragging",function(){var n=marker.getPosition();flagToMap(n)}),t=new soso.maps.NavigationControl({align:soso.maps.ALIGN.TOP_LEFT,margin:new soso.maps.Size(5,15),map:map})}var map,geocoder,marker=null,center=new soso.maps.LatLng(30.657517,104.065847)